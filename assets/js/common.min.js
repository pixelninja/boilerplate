/*! jQuery Mobile v1.3.2 | Copyright 2010, 2013 jQuery Foundation, Inc. | jquery.org/license */(function(e,t,n){typeof define=="function"&&define.amd?define(["jquery"],function(r){return n(r,e,t),r.mobile}):n(e.jQuery,e,t)})(this,document,function(e,t,n,r){(function(e,t,n,r){function i(e){while(e&&typeof e.originalEvent!="undefined")e=e.originalEvent;return e}function s(t,n){var s=t.type,o,u,a,f,l,c,h,p,d;t=e.Event(t),t.type=n,o=t.originalEvent,u=e.event.props,s.search(/^(mouse|click)/)>-1&&(u=L);if(o)for(h=u.length,f;h;)f=u[--h],t[f]=o[f];s.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1);if(s.search(/^touch/)!==-1){a=i(o),s=a.touches,l=a.changedTouches,c=s&&s.length?s[0]:l&&l.length?l[0]:r;if(c)for(p=0,d=C.length;p<d;p++)f=C[p],t[f]=c[f]}return t}function o(t){var n={},r,i;while(t){r=e.data(t,x);for(i in r)r[i]&&(n[i]=n.hasVirtualBinding=!0);t=t.parentNode}return n}function u(t,n){var r;while(t){r=e.data(t,x);if(r&&(!n||r[n]))return t;t=t.parentNode}return null}function a(){B=!1}function f(){B=!0}function l(){q=0,P.length=0,H=!1,f()}function c(){a()}function h(){p(),O=setTimeout(function(){O=0,l()},e.vmouse.resetTimerDuration)}function p(){O&&(clearTimeout(O),O=0)}function d(t,n,r){var i;if(r&&r[t]||!r&&u(n.target,t))i=s(n,t),e(n.target).trigger(i);return i}function v(t){var n=e.data(t.target,T);if(!H&&(!q||q!==n)){var r=d("v"+t.type,t);r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function m(t){var n=i(t).touches,r,s;if(n&&n.length===1){r=t.target,s=o(r);if(s.hasVirtualBinding){q=I++,e.data(r,T,q),p(),c(),D=!1;var u=i(t).touches[0];M=u.pageX,_=u.pageY,d("vmouseover",t,s),d("vmousedown",t,s)}}}function g(e){if(B)return;D||d("vmousecancel",e,o(e.target)),D=!0,h()}function y(t){if(B)return;var n=i(t).touches[0],r=D,s=e.vmouse.moveDistanceThreshold,u=o(t.target);D=D||Math.abs(n.pageX-M)>s||Math.abs(n.pageY-_)>s,D&&!r&&d("vmousecancel",t,u),d("vmousemove",t,u),h()}function b(e){if(B)return;f();var t=o(e.target),n;d("vmouseup",e,t);if(!D){var r=d("vclick",e,t);r&&r.isDefaultPrevented()&&(n=i(e).changedTouches[0],P.push({touchID:q,x:n.clientX,y:n.clientY}),H=!0)}d("vmouseout",e,t),D=!1,h()}function w(t){var n=e.data(t,x),r;if(n)for(r in n)if(n[r])return!0;return!1}function E(){}function S(t){var n=t.substr(1);return{setup:function(r,i){w(this)||e.data(this,x,{});var s=e.data(this,x);s[t]=!0,A[t]=(A[t]||0)+1,A[t]===1&&F.bind(n,v),e(this).bind(n,E),j&&(A.touchstart=(A.touchstart||0)+1,A.touchstart===1&&F.bind("touchstart",m).bind("touchend",b).bind("touchmove",y).bind("scroll",g))},teardown:function(r,i){--A[t],A[t]||F.unbind(n,v),j&&(--A.touchstart,A.touchstart||F.unbind("touchstart",m).unbind("touchmove",y).unbind("touchend",b).unbind("scroll",g));var s=e(this),o=e.data(this,x);o&&(o[t]=!1),s.unbind(n,E),w(this)||s.removeData(x)}}}var x="virtualMouseBindings",T="virtualTouchID",N="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),C="clientX clientY pageX pageY screenX screenY".split(" "),k=e.event.mouseHooks?e.event.mouseHooks.props:[],L=e.event.props.concat(k),A={},O=0,M=0,_=0,D=!1,P=[],H=!1,B=!1,j="addEventListener"in n,F=e(n),I=1,q=0,R;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var U=0;U<N.length;U++)e.event.special[N[U]]=S(N[U]);j&&n.addEventListener("click",function(t){var n=P.length,r=t.target,i,s,o,u,a,f;if(n){i=t.clientX,s=t.clientY,R=e.vmouse.clickDistanceThreshold,o=r;while(o){for(u=0;u<n;u++){a=P[u],f=0;if(o===r&&Math.abs(a.x-i)<R&&Math.abs(a.y-s)<R||e.data(o,T)===a.touchID){t.preventDefault(),t.stopPropagation();return}}o=o.parentNode}}},!0)})(e,t,n),function(e){e.mobile={}}(e),function(e,t){var r={touch:"ontouchend"in n};e.mobile.support=e.mobile.support||{},e.extend(e.support,r),e.extend(e.mobile.support,r)}(e),function(e,t,r){function i(t,n,r){var i=r.type;r.type=n,e.event.dispatch.call(t,r),r.type=i}var s=e(n);e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)},e.attrFn&&(e.attrFn[n]=!0)});var o=e.mobile.support.touch,u="touchmove scroll",a=o?"touchstart":"mousedown",f=o?"touchend":"mouseup",l=o?"touchmove":"mousemove";e.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){s=t,i(n,s?"scrollstart":"scrollstop",e)}var n=this,r=e(n),s,o;r.bind(u,function(n){if(!e.event.special.scrollstart.enabled)return;s||t(n,!0),clearTimeout(o),o=setTimeout(function(){t(n,!1)},50)})}},e.event.special.tap={tapholdThreshold:750,setup:function(){var t=this,n=e(t);n.bind("vmousedown",function(r){function o(){clearTimeout(c)}function u(){o(),n.unbind("vclick",a).unbind("vmouseup",o),s.unbind("vmousecancel",u)}function a(e){u(),f===e.target&&i(t,"tap",e)}if(r.which&&r.which!==1)return!1;var f=r.target,l=r.originalEvent,c;n.bind("vmouseup",o).bind("vclick",a),s.bind("vmousecancel",u),c=setTimeout(function(){i(t,"taphold",e.Event("taphold",{target:f}))},e.event.special.tap.tapholdThreshold)})}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,start:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t;return{time:(new Date).getTime(),coords:[n.pageX,n.pageY],origin:e(t.target)}},stop:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e;return{time:(new Date).getTime(),coords:[t.pageX,t.pageY]}},handleSwipe:function(t,n){n.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-n.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-n.coords[1])<e.event.special.swipe.verticalDistanceThreshold&&t.origin.trigger("swipe").trigger(t.coords[0]>n.coords[0]?"swipeleft":"swiperight")},setup:function(){var t=this,n=e(t);n.bind(a,function(t){function i(t){if(!s)return;o=e.event.special.swipe.stop(t),Math.abs(s.coords[0]-o.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault()}var s=e.event.special.swipe.start(t),o;n.bind(l,i).one(f,function(){n.unbind(l,i),s&&o&&e.event.special.swipe.handleSwipe(s,o),s=o=r})})}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)}}})}(e,this)});window.matchMedia=window.matchMedia||function(e,t){"use strict";var n,r=e.documentElement,i=r.firstElementChild||r.firstChild,s=e.createElement("body"),o=e.createElement("div");o.id="mq-test-1";o.style.cssText="position:absolute;top:-100em";s.style.background="none";s.appendChild(o);return function(e){o.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>';r.insertBefore(s,i);n=o.offsetWidth===42;r.removeChild(s);return{matches:n,media:e}}}(document);(function(){if(!window.matchMedia("all").addListener){var e=window.matchMedia;window.matchMedia=function(t){var n=e(t),r=[],i=n.matches,s,o=function(){var s=e(t),o=s.matches&&!i,u=!s.matches&&i;if(o||u)for(var a=0,f=r.length;a<f;a++)r[a].call(n,s);i=s.matches};n.addListener=function(e){r.push(e);s||(s=setInterval(o,1e3))};n.removeListener=function(e){for(var t=0,n=r.length;t<n;t++)r[t]===e&&r.splice(t,1);!r.length&&s&&clearInterval(s)};return n}}})();(function(e){"use strict";function t(e,t){var n,r=0,i=e.length;for(r;i>r&&(n=t(e[r],r),n!==!1);r++);}function n(e){return"[object Array]"===Object.prototype.toString.apply(e)}function r(e){return"function"==typeof e}function i(e){this.options=e,!e.deferSetup&&this.setup()}function s(e,t){this.query=e,this.isUnconditional=t,this.handlers=[],this.mql=u(e);var n=this;this.listener=function(e){n.mql=e,n.assess()},this.mql.addListener(this.listener)}function o(){if(!u)throw Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!u("only all").matches}var u=e.matchMedia;i.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},s.prototype={addHandler:function(e){var t=new i(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(e){var n=this.handlers;t(n,function(t,r){return t.equals(e)?(t.destroy(),!n.splice(r,1)):void 0})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){t(this.handlers,function(e){e.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var e=this.matches()?"on":"off";t(this.handlers,function(t){t[e]()})}},o.prototype={register:function(e,i,o){var u=this.queries,a=o&&this.browserIsIncapable;return u[e]||(u[e]=new s(e,a)),r(i)&&(i={match:i}),n(i)||(i=[i]),t(i,function(t){u[e].addHandler(t)}),this},unregister:function(e,t){var n=this.queries[e];return n&&(t?n.removeHandler(t):(n.clear(),delete this.queries[e])),this}},e.enquire=e.enquire||new o})(this);$(document).ready(function(){"use strict";function t(e){var t=e.attr("href"),n=e.closest("article"),r=n.siblings();r.animate({opacity:0,left:500},500);setTimeout(function(){n.css({marginTop:n.offset().top-190}).animate({left:0});r.remove();n.animate({marginTop:0},500,function(){n.find(".bg-play").animate({right:0},500);n.find("div").css({marginRight:0});n.find("figure").animate({marginLeft:30,marginRight:40},500,function(){$.get(t,function(e){var r=$(e);n.remove();$(".play-items").addClass("detail").append(r.find(".play-items article"));$("#main").append(r.find(".copy").hide().fadeIn(700));i();s();$(".sub-nav").find("select").selectOverlay();typeof window.history.pushState=="function"&&window.history.pushState(null,null,t)})})})},750)}function n(){$("div.play-items:not(.detail)").on("swipeleft","a",function(e){t($(this))});$("div.play-items:not(.detail)").on(EVENT_METHOD,"a",function(e){e.preventDefault();t($(this));return!1})}function r(t){var n=t.attr("href"),r=t.closest("article"),o=$(".copy");$.get(n,function(r){var o=$(r),u=o.find(".copy");$("#main > .l-section").wrap('<div class="old-copy" />');$("#main").append('<div class="new-copy" />');$(".new-copy").append(o.find(".play-items"));$(".new-copy").append(u);if(t.hasClass("next")){$(".old-copy").animate({left:-$(window).width()},300);$(".new-copy").animate({left:($(window).width()-$(".l-section").width())/2},300,function(){$(".old-copy").remove();$(".play-items").unwrap();if(e.width()<760){s();$(".sub-nav").find("select").selectOverlay()}})}else{$(".new-copy").addClass("right");$(".old-copy").animate({right:-$(window).width()},300);$(".new-copy").animate({right:($(window).width()-$(".l-section").width())/2},300,function(){$(".old-copy").remove();$(".play-items").unwrap();if(e.width()<760){s();$(".sub-nav").find("select").selectOverlay()}})}i();typeof window.history.pushState=="function"&&window.history.pushState(null,null,n)})}function i(){$("div.play-items.detail").on("swipeleft swiperight",function(e){e.type==="swipeleft"?r($(this).find(".next")):r($(this).find(".prev"))});$("div.play-items.detail").on(EVENT_METHOD,"a",function(e){e.preventDefault();r($(this));return!1})}function s(){if(!$(".sub-nav select").length){$(".sub-nav").append('<span class="overlay" />').append('<select class="mobile-subnav" />').find("li").each(function(){var e=$(this),t=e.text().trim(),n=$('<option value="'+t.toLowerCase().replace(/\s/g,"-")+'">'+t+"</option>");$(this).find("a").hasClass("active")&&n.attr("selected",!0);$(".mobile-subnav").append(n)});$(".overlay, .mobile-subnav").hide().fadeIn(200)}$(".mobile-subnav").on("change",function(){var e=$(this).find("option:selected");location.href=ROOT+e.val()+"/"})}var e=$("body");e.on(EVENT_METHOD,"a.external, a[rel=external]",function(){var e=$(this);window.open(e.attr("href"));return!1});e.on(EVENT_METHOD,"a.menu, .mobile-menu",function(){var e=$(this).closest("section");e.toggleClass("active");return!1});(function(){Modernizr.load({test:$(".home-page").length,yep:ASSETS_ROOT+"js/libs/cycle.min.js",complete:function(){if(!$(".home-page").length&&typeof $.fn.cycle=="undefined")return!1;$(".hero-wrapper").cycle({fx:"fade",speed:"750",timeout:"8000",slideResize:0});$(".whats-on ul").cycle({fx:"scrollLeft",speed:"500",timeout:"8000",pager:$(".cycle-nav"),slideResize:0,before:function(e,t,n){$(t).addClass("active")},after:function(e,t,n){$(t).siblings().removeClass("active")}})}})})();n();i();$.fn.selectOverlay=function(){this.on("change",function(){var e=$(this).find("option:selected"),t=$(this).prev(),n=e.text();t.text(n)});var e=this,t=e.prev(),n=e.find("option:selected").text();n!==""&&t.text(n)};$.fn.cHeight=function(){var e=0;this.each(function(t){var n=$(this).outerHeight();n>e&&(e=n)});return this.css("height",e+"px")};if(matchMedia("only screen").matches){var o={largeDesktop:function(e){$("body").data("mq",e.type);(function(){if(!$(".home-page").length)return!1;var e=$("#navigation");e.addClass("active")})()},lteLargeDesktop:function(e){$("body").data("mq",e.type);var t=$("#navigation");t.removeClass("active")},desktop:function(e){$("body").data("mq",e.type);(function(){if(!$(".specials").length)return!1;$(".specials").find("div").cHeight()})()},lteTablet:function(e){$("body").data("mq",e.type)},tablet:function(e){$("body").data("mq",e.type)},mobile:function(e){$("body").data("mq",e.type);$(".home-page").length&&$(".hero-wrapper").height($(document).height());s();$(".sub-nav").find("select").selectOverlay();(function(e){function o(){s.content="width=device-width,minimum-scale="+i[0]+",maximum-scale="+i[1];e.removeEventListener(n,o,!0)}var t="addEventListener",n="gesturestart",r="querySelectorAll",i=[1,1],s=r in e?e[r]("meta[name=viewport]"):[];if((s=s[s.length-1])&&t in e){o();i=[.25,1.6];e[t](n,o,!0)}})(document)}};e.on("large-desktop",o.largeDesktop).on("lte-large-desktop",o.lteLargeDesktop).on("desktop",o.desktop).on("lte-tablet",o.lteTablet).on("tablet",o.tablet).on("mobile",o.mobile);enquire.register("(min-width: 1335px)",{match:function(){e.trigger("large-desktop")}}).register("(max-width: 1334px)",{match:function(){e.trigger("lte-large-desktop")}}).register("(min-width: 1025px)",{match:function(){e.trigger("desktop")}},!0).register("(max-width: 1024px)",{match:function(){e.trigger("lte-tablet")}}).register("(min-width: 761px) and (max-width: 1024px)",{match:function(){e.trigger("tablet")}}).register("(max-width: 760px), (max-width: 799px) and (orientation: landscape)",{match:function(){e.trigger("mobile")}}).listen()}});